# Домашнее задание к занятию Troubleshooting

### Цель задания

Устранить неисправности при деплое приложения.

### Чеклист готовности к домашнему заданию

1. Кластер K8s.

### Задание. При деплое приложение web-consumer не может подключиться к auth-db. Необходимо это исправить

1. Установить приложение по команде:
```shell
kubectl apply -f https://raw.githubusercontent.com/netology-code/kuber-homeworks/main/3.5/files/task.yaml
```
2. Выявить проблему и описать.
3. Исправить проблему, описать, что сделано.
4. Продемонстрировать, что проблема решена.

### Ответ:

```
user@ubuntu-2204:~/netology/git/kuber-homeworks/3.5/files$ kubectl apply -f task.yaml
Error from server (NotFound): error when creating "task.yaml": namespaces "web" not found
Error from server (NotFound): error when creating "task.yaml": namespaces "data" not found
Error from server (NotFound): error when creating "task.yaml": namespaces "data" not found

Нужно создать namespace web и data
user@ubuntu-2204:~/netology/git/kuber-homeworks/3.5/files$ kubectl create namespace web
namespace/web created
user@ubuntu-2204:~/netology/git/kuber-homeworks/3.5/files$ kubectl create namespace data
namespace/data created
user@ubuntu-2204:~/netology/git/kuber-homeworks/3.5/files$ kubectl get namespace
NAME                   STATUS   AGE
kube-system            Active   73d
kube-public            Active   73d
kube-node-lease        Active   73d
default                Active   73d
kubernetes-dashboard   Active   73d
ingress-nginx          Active   46d
metallb-system         Active   45d
app                    Active   7d18h
web                    Active   2m13s
data                   Active   2m8s

user@ubuntu-2204:~/netology/git/kuber-homeworks/3.5/files$ kubectl apply -f task.yaml
deployment.apps/web-consumer created
deployment.apps/auth-db created
service/auth-db created

user@ubuntu-2204:~/netology/git/kuber-homeworks/3.5/files$ kubectl get pods -n web -o wide
NAME                            READY   STATUS    RESTARTS   AGE     IP            NODE          NOMINATED NODE   READINESS GATES
web-consumer-5f87765478-nrk2x   1/1     Running   0          3m47s   10.1.131.68   ubuntu-2204   <none>           <none>
web-consumer-5f87765478-xjcrh   1/1     Running   0          3m47s   10.1.131.77   ubuntu-2204   <none>           <none>

user@ubuntu-2204:~/netology/git/kuber-homeworks/3.5/files$ kubectl get pods -n data -o wide
NAME                       READY   STATUS    RESTARTS   AGE     IP            NODE          NOMINATED NODE   READINESS GATES
auth-db-7b5cdbdc77-xfw5s   1/1     Running   0          3m28s   10.1.131.65   ubuntu-2204   <none>           <none>

user@ubuntu-2204:~/netology/git/kuber-homeworks/3.5/files$ kubectl get svc -n data -o wide
NAME      TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)   AGE     SELECTOR
auth-db   ClusterIP   10.152.183.247   <none>        80/TCP    5m13s   app=auth-db












user@ubuntu-2204:~/netology/git/kuber-homeworks/3.5/files$ kubectl apply -f task.yaml
deployment.apps/web-consumer created
deployment.apps/auth-db created
service/auth-db created
user@ubuntu-2204:~/netology/git/kuber-homeworks/3.5/files$ kubectl get pods -n data -o wide
NAME                       READY   STATUS    RESTARTS   AGE   IP             NODE          NOMINATED NODE   READINESS GATES
auth-db-7b5cdbdc77-5zv7z   1/1     Running   0          46h   10.1.131.110   ubuntu-2204   <none>           <none>
user@ubuntu-2204:~/netology/git/kuber-homeworks/3.5/files$ kubectl get svc -n data
NAME      TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)   AGE
auth-db   ClusterIP   10.152.183.19   <none>        80/TCP    3m10s

user@ubuntu-2204:~/netology/git/kuber-homeworks/3.5/files$ kubectl get pod -n web
NAME                            READY   STATUS    RESTARTS   AGE
web-consumer-5f87765478-48tzc   1/1     Running   0          3m32s
web-consumer-5f87765478-2992q   1/1     Running   0          3m32s
user@ubuntu-2204:~/netology/git/kuber-homeworks/3.5/files$ kubectl get pod -n web -o wide
NAME                            READY   STATUS    RESTARTS   AGE   IP             NODE          NOMINATED NODE   READINESS GATES
web-consumer-5f87765478-48tzc   1/1     Running   0          17m   10.1.131.102   ubuntu-2204   <none>           <none>
web-consumer-5f87765478-2992q   1/1     Running   0          17m   10.1.131.88    ubuntu-2204   <none>           <none>

Заходим на ноду и проверяем соединение с базой:  


```





### Правила приёма работы

1. Домашняя работа оформляется в своём Git-репозитории в файле README.md. Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.
2. Файл README.md должен содержать скриншоты вывода необходимых команд, а также скриншоты результатов.
3. Репозиторий должен содержать тексты манифестов или ссылки на них в файле README.md.
